axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)+
xlim(0,3)
t
#Figure for SDI CNH with subset programs
p <- ggplot(grants, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$Grant.Searched == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$Grant.Searched == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$Grant.Searched == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$Grant.Searched == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)+
xlim(0, 3)
t
ggsave(filename= "Figures/Density_Shannon_CHN_grantprogram_9.17.20.pdf", t, width=10, height=8)
#Figure for SDI interdiscpline with subset programs
p <- ggplot(grants, aes(x=sdi_interdisc))+
geom_density(data=subset(grants, grants$Grant.Searched == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$Grant.Searched == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$Grant.Searched == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$Grant.Searched == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for Interdisciplinary ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)+
xlim(0,3)
t
ggsave(filename= "Figures/Density_Shannon_Interdis_grantprogram_9.17.20.pdf", t, width=10, height=8)
View(grant_deets)
View(grant_deets_clean)
View(pub_sum)
View(pubs)
pubs<- pubs %>% left_join(grants)
pubs<- pubs %>% left_join(grants, by = c("Grant.Number"))
View(pubs)
pubs<- pubs %>% left_join(grants, by = c("Grant.Number"))
grantpubs <- pubs %>%
group_by(Grant.Number, Grant.Searched, CNH.Rubric.2)
grantpubs <- pubs %>%
group_by(Grant.Number, Grant.Number, CNH.Rubric.2) %>%
tally()
View(grantpubs)
grantpubs <- pubs %>%
group_by(Grant.Searched.x, Grant.Number, CNH.Rubric.2) %>%
tally()
View(grantpubs)
View(pubs)
grantpubsIN <- pubs %>%
group_by(Grant.Searched.x, Grant.Number, pubs$Interdis.Rubric.1) %>%
tally()
View(grantpubsIN)
grantpubsIN <- pubs %>%
group_by(Grant.Searched.x, Grant.Number, Interdis.Rubric.1) %>%
tally()
PropgrantsIN <- grantpubs %>%
group_by(Grant.Searched.x, Interdis.Rubric.1)
%>% tally()
PropgrantsIN <- grantpubs %>%
group_by(Grant.Searched.x, Interdis.Rubric.1) %>%
tally()
PropgrantsIN <- pubs %>%
group_by(Grant.Searched.x, Interdis.Rubric.1) %>%
tally()
View(PropgrantsIN)
View(grantpubsIN)
PropgrantsIN <- grantpubsIN %>%
group_by(Grant.Searched.x, Interdis.Rubric.1) %>%
tally()
View(PropgrantsIN)
View(grantpubsIN)
grantpubsIN < unique(grantpubsIN$Grant.Number)
totalgrants <-grants %>%
group_by(Grant.Searched) %>%
tally()
View(totalgrants)
grantpubsIN <- pubs %>%
group_by(Grant.Number, Interdis.Rubric.1) %>%
tally()
View(grantpubsIN)
grantpubsIN <- pubs %>%
group_by(Grant.Searched.x,  Interdis.Rubric.1) %>%
tally()
View(grantpubsIN)
df <- grants %>%
group_by(GrantingProgram) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
df <- grants %>%
group_by(Grant.Searched.x) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(grants$Number.of.Papers..NSF.), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
grants$grants$Number.of.Papers..NSF. <- as.numeric(as.character(grants$Number.of.Papers))
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(grants$Number.of.Papers..NSF.), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
grants$Number.of.Papers..NSF. <- as.numeric(as.character(grants$Number.of.Papers))
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(grants$Number.of.Papers..NSF.), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
grants$Funding.Amount <- as.numeric(as.character(grants$Funding.Amount))
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(grants$Number.of.Papers..NSF.), FundingAmount = sum(Funding.Amount), medianFund= median(Funding.Amount))
View(df)
names(grants)[1] <- "Grant.Searched"
grant_sum <- grants %>% group_by(Grant.Searched) %>% summarize(count=n())
pubs$Journal<-as.character(pubs$journal)
pubs$Journal<-char_tolower(pubs$journal)
pub_sum<- pubs %>% group_by(journal) %>% summarize(count=n())
rub_sum<- pubs %>% group_by(CNH.Rubric.2) %>% summarize(count=n())
rub_sum_v2<- pubs %>% group_by(Interdis.Rubric.1) %>% summarize(count=n())
pubs$X <- NULL
pubs <- pubs[, -c(14:29)]
pubs <- na.omit(pubs)
#grant_ids <- unique(pubs$Grant.Number)
#grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi'=-1)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi_CNH'=-1, 'sdi_interdisc'=-1, 'sdi_dis'=-1)
for (i in 1:length(grant_ids)) {
if (length(pubs$Publication.Year[pubs$Grant.Number == grant_ids[i]]) > 2){
grant_deets$sdi_CNH[i] <- diversity(pubs$CNH.Rubric.2[pubs$Grant.Number == grant_ids[i]], index="shannon")
grant_deets$sdi_interdisc[i] <- diversity(pubs$Interdis.Rubric.1[pubs$Grant.Number == grant_ids[i]], index="shannon")
#grant_deets$sdi_dis[i] <- diversity(pubs$Discipline[pubs$Grant.Number == grant_ids[i]], index="shannon")
} else {grant_deets$sdi_CNH[i] <-NA
grant_deets$sdi_interdisc[i] <-NA
}
}
#QUITE A FEW NAs for the diversity that we need to figure out (not all 0 papers)
##### FOR SDI with publication discipline
pubs <- pubs %>%
mutate(Journal = tolower(Journal))
#pubs <- pubs[, -c(14:29)]
pubs <- rename(pubs, "journal" = "Journal")
journals <- rename(journals, "journal" = "Journal")
journals <- journals %>%
mutate(journal = tolower(journal))
pubs<- left_join(pubs, journals, by= "journal")
pubs<-subset(pubs, Grant.Number != "")
pubs <- unique(pubs)
rub_sum_v3 <- pubs %>% group_by(Discipline) %>% summarize(count=n())
levels(pubs$Discipline) <- c(levels(pubs$Discipline), "1", "2", "3", "4", "5", "6", "7", "8",
"9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20")
pubs$Discipline[pubs$Discipline== ""] <- "1"
pubs$Discipline[pubs$Discipline=="ses"] <- "2"
pubs$Discipline[pubs$Discipline=="ecology /biology"] <- "3"
pubs$Discipline[pubs$Discipline=="multi-disciplinary"] <- "4"
pubs$Discipline[pubs$Discipline=="biogeochemistry"] <- "5"
pubs$Discipline[pubs$Discipline=="atmospheric"] <- "6"
pubs$Discipline[pubs$Discipline=="geoscience"] <- "7"
pubs$Discipline[pubs$Discipline=="oceanography"] <- "8"
pubs$Discipline[pubs$Discipline=="hydrology"] <- "9"
pubs$Discipline[pubs$Discipline=="social sciences"] <- "10"
pubs$Discipline[pubs$Discipline=="health/disease"] <- "11"
pubs$Discipline[pubs$Discipline=="ag"] <- "12"
pubs$Discipline[pubs$Discipline=="humanities"] <- "13"
pubs$Discipline[pubs$Discipline=="geography"] <- "14"
pubs$Discipline[pubs$Discipline=="law"] <- "15"
pubs$Discipline[pubs$Discipline=="marine science"] <- "16"
pubs$Discipline[pubs$Discipline=="engineering"] <- "17"
pubs$Discipline[pubs$Discipline=="physics"] <- "18"
pubs$Discipline[pubs$Discipline=="remote sensing"] <- "19"
pubs$Discipline[pubs$Discipline=="mathematics"] <- "20"
pubs$Discipline <- as.numeric(as.character(pubs$Discipline))
data_subset <- pubs[ , c("Discipline")]
pubs <- pubs[complete.cases(data_subset), ]
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
grants$Funding.Amount <- as.numeric(as.character(grants$Funding.Amount))
#grants2<-subset(grants, Funding.Amount != "")
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), FundingAmount = sum(Funding.Amount),
MeanFunding = mean(Funding.Amount), MeanNumPapers = mean(Number.of.Papers..NSF.), MedNumPapers = median(Number.of.Papers..NSF.)) #numberpaper = sum(Number.of.Papers..NSF.)
df<-subset(df, Grant.Searched != "")
p <- ggplot(data = df) +
geom_col(aes(x = Grant.Searched, y= df$count, fill = FundingAmount))
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
main <- p + labs(x = "Grant Program", y ="Number of Grants", fill = "Funding Amount (USD)") +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =8),
axis.text.y = element_text(colour = "gray30", size = 12),
panel.grid.major = element_blank(),
legend.text = element_text(size=8),
legend.title = element_text(size=8),
legend.background = element_rect(fill = "transparent", colour = NA),
legend.position = c(0.9, 0.7),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =15),
axis.title.y = element_text(size =15))+
scale_fill_gradientn(colours=c("navy", "yellow")) +   #"cyan3", "yellow4")"green3", "grey50"  #"dodgerblue", "navy" #"darkcyan", "yellow4", "black" #"green4","olivedrab3", "darkorange1", # "red","navy", "dodgerblue" #"darkorchid4","lightskyblue4", "black"
guides(fill = guide_colourbar(barwidth = 0.75, barheight = 10))
main
#ggsave(filename= "Figures/Grants_fundingamount_columnchart.pdf", t, width=10, height=8)
### Mean papers by grant program
df2<-subset(df, Grant.Searched != "ML")
p <- ggplot(data = df2) +
geom_col(aes(x = Grant.Searched, y= log10(df2$MeanNumPapers)))+
geom_point(data = df2, aes(x = Grant.Searched, y= log10(df2$MedNumPapers)))
#facet_zoom(ylim = c(0,500))
papers <- p + labs(x = "Grant Program", y ="Logged Mean Number of Papers per Grant" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
#ylim(0,500)
papers
df2<-subset(df, Grant.Searched != "ML")
p <- ggplot(data = df2) +
geom_col(aes(x = Grant.Searched, y= log10(df2$MeanNumPapers)))+
geom_point(data = df2, aes(x = Grant.Searched, y= log10(df2$MedNumPapers)))
#facet_zoom(ylim = c(0,500))
papers <- p + labs(x = "Grant Program", y ="Logged Mean Number of Papers per Grant" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
ylim(0,3)
papers
#ggsave(filename= "Figures/Grants_searched_numberpapers_barchart.pdf", papers, width=10, height=8)
papers <- p + labs(x = "Grant Program", y ="Logged Mean Number of Papers per Grant" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))+
ylim(0,3)
papers
figure <- ggdraw() +
draw_plot(main, x = 0, y = 0, width = .65, height = 1) +
draw_plot(papers, x = .65, y = .5, width = .35, height = .5) +
draw_plot(cit, x = .65, y = 0, width = .35, height = 0.5)+
draw_plot_label(label = c("A", "B", "C"), size = 15,
x = c(0, 0.96, 0.96), y = c(1, 0.99, 0.49))
figure
Pubgrants <- left_join(pubs, grants, by= "Grant.Number")
Pubgrants <- subset(Pubgrants, Pubgrants$Grant.Searched != "")
Pubgrants <- subset(Pubgrants, Pubgrants$Citations != "NA")
data <- Pubgrants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
data <- transform(data, CitationsPerPaper = (Citations/count))
p <- ggplot(data = data) +
geom_col(aes(x = Grant.Searched, y= data$CitMean))+
geom_point(aes(x = Grant.Searched, y= data$CitMedian))
cit <- p + labs(x = "Grant Program", y ="Mean Number of Citations per Paper" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
cit
data <- Pubgrants %>%
group_by(Grant.Searched.x) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations))
p <- ggplot(data = data) +
geom_col(aes(x = Grant.Searched, y= data$CitMean))+
geom_point(aes(x = Grant.Searched, y= data$CitMedian))
cit <- p + labs(x = "Grant Program", y ="Mean Number of Citations per Paper" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
cit
p <- ggplot(data = data) +
geom_col(aes(x = Grant.Searched.x, y= data$CitMean))+
geom_point(aes(x = Grant.Searched.x, y= data$CitMedian))
cit <- p + labs(x = "Grant Program", y ="Mean Number of Citations per Paper" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
cit
#ggsave(filename= "
View(data)
Pubgrants <- left_join(pubs, grants, by= "Grant.Number")
Pubgrants <- subset(Pubgrants, Pubgrants$Grant.Searched != "")
Pubgrants <- subset(Pubgrants, Pubgrants$Citations != "NA")
data <- Pubgrants %>%
group_by(Grant.Searched.x) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
Pubgrants <- left_join(pubs, grants, by= "Grant.Number")
#join grants to pubs
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
pubs <- rename(pubs, "Grant.Searched" = "Grant.Searched.x")
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
Pubgrants <- subset(Pubgrants, Pubgrants$Grant.Searched != "")
Pubgrants <- subset(Pubgrants, Pubgrants$Citations != "NA")
data <- Pubgrants %>%
group_by(Grant.Searched.x) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
data <- transform(data, CitationsPerPaper = (Citations/count))
data <- Pubgrants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
data <- transform(data, CitationsPerPaper = (Citations/count))
View(data)
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
grants<- read.csv('Grants_toTrack_0722.csv')
pubs<- read.csv('PublicationTracker_0722.csv')
journals <- read.csv('JournalDisciplines.csv')
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
pubs <- rename(pubs, "Grant.Searched" = "Grant.Number")
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
type(pubs$Grant.Searched)
typeof(pubs$Grant.Searched)
typeof(grants$Grant.Searched)
pubs$Grant.Searched <- as.charcter(as.numeric(pubs$Grant.Searched))
pubs$Grant.Searched <- as.character(as.numeric(pubs$Grant.Searched))
typeof(pubs$Grant.Searched)
grants$Grant.Searched <- as.character(as.numeric(grants$Grant.Searched))
Pubgrants <- left_join(pubs, grants, by= "Grant.Searched")
Pubgrants <- subset(Pubgrants, Pubgrants$Grant.Searched != "")
Pubgrants <- subset(Pubgrants, Pubgrants$Citations != "NA")
data <- Pubgrants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
data <- transform(data, CitationsPerPaper = (Citations/count))
View(data)
View(grants)
grants<- read.csv('Grants_toTrack_0722.csv')
View(grants)
Pubgrants <- left_join(pubs, grants, by= "Grant.Number")
pubs<- read.csv('PublicationTracker_0722.csv')
Pubgrants <- left_join(pubs, grants, by= "Grant.Number")
Pubgrants <- subset(Pubgrants, Pubgrants$Grant.Searched != "")
Pubgrants <- subset(Pubgrants, Pubgrants$Citations != "NA")
data <- Pubgrants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), CitMedian = median(Citations), CitMean = mean(Citations)) #Citations = sum(Citations)
data <- transform(data, CitationsPerPaper = (Citations/count))
View(data)
p <- ggplot(data = data) +
geom_col(aes(x = Grant.Searched.x, y= data$CitMean))+
geom_point(aes(x = Grant.Searched.x, y= data$CitMedian))
cit <- p + labs(x = "Grant Program", y ="Mean Number of Citations per Paper" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
cit
p <- ggplot(data = data) +
geom_col(aes(x = Grant.Searched, y= data$CitMean))+
geom_point(aes(x = Grant.Searched, y= data$CitMedian))
cit <- p + labs(x = "Grant Program", y ="Mean Number of Citations per Paper" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 10),
axis.text.x = element_text(colour = "gray30", size =6),
axis.text.y = element_text(colour = "gray30", size =10),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =12),
axis.title.y = element_text(size =10))
cit
figure <- ggdraw() +
draw_plot(main, x = 0, y = 0, width = .65, height = 1) +
draw_plot(papers, x = .65, y = .5, width = .35, height = .5) +
draw_plot(cit, x = .65, y = 0, width = .35, height = 0.5)+
draw_plot_label(label = c("A", "B", "C"), size = 15,
x = c(0, 0.96, 0.96), y = c(1, 0.99, 0.49))
figure
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
grants$Funding.Amount <- as.numeric(as.character(grants$Funding.Amount))
#grants2<-subset(grants, Funding.Amount != "")
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), FundingAmount = sum(Funding.Amount),
MeanFunding = mean(Funding.Amount), MeanNumPapers = mean(Number.of.Papers..NSF.), MedNumPapers = median(Number.of.Papers..NSF.)) #numberpaper = sum(Number.of.Papers..NSF.)
df<-subset(df, Grant.Searched != "")
p <- ggplot(data = df) +
geom_col(aes(x = Grant.Searched, y= df$count, fill = FundingAmount))
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
main <- p + labs(x = "Grant Program", y ="Number of Grants", fill = "Funding Amount (USD)") +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =8),
axis.text.y = element_text(colour = "gray30", size = 12),
panel.grid.major = element_blank(),
legend.text = element_text(size=8),
legend.title = element_text(size=8),
legend.background = element_rect(fill = "transparent", colour = NA),
legend.position = c(0.9, 0.7),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =15),
axis.title.y = element_text(size =15))+
scale_fill_gradientn(colours=c("navy", "yellow")) +   #"cyan3", "yellow4")"green3", "grey50"  #"dodgerblue", "navy" #"darkcyan", "yellow4", "black" #"green4","olivedrab3", "darkorange1", # "red","navy", "dodgerblue" #"darkorchid4","lightskyblue4", "black"
guides(fill = guide_colourbar(barwidth = 0.75, barheight = 10))
main
#ggsave(filename= "Fig
grants2<-subset(grants, Funding.Amount != "")
df <- grants2 %>%
group_by(Grant.Searched) %>%
summarise(count = n(), FundingAmount = sum(Funding.Amount),
MeanFunding = mean(Funding.Amount), MeanNumPapers = mean(Number.of.Papers..NSF.), MedNumPapers = median(Number.of.Papers..NSF.)) #numberpaper = sum(Number.of.Papers..NSF.)
df<-subset(df, Grant.Searched != "")
p <- ggplot(data = df) +
geom_col(aes(x = Grant.Searched, y= df$count, fill = FundingAmount))
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
main <- p + labs(x = "Grant Program", y ="Number of Grants", fill = "Funding Amount (USD)") +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =8),
axis.text.y = element_text(colour = "gray30", size = 12),
panel.grid.major = element_blank(),
legend.text = element_text(size=8),
legend.title = element_text(size=8),
legend.background = element_rect(fill = "transparent", colour = NA),
legend.position = c(0.9, 0.7),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =15),
axis.title.y = element_text(size =15))+
scale_fill_gradientn(colours=c("navy", "yellow")) +   #"cyan3", "yellow4")"green3", "grey50"  #"dodgerblue", "navy" #"darkcyan", "yellow4", "black" #"green4","olivedrab3", "darkorange1", # "red","navy", "dodgerblue" #"darkorchid4","lightskyblue4", "black"
guides(fill = guide_colourbar(barwidth = 0.75, barheight = 10))
main
#ggsave(filename
figure <- ggdraw() +
draw_plot(main, x = 0, y = 0, width = .65, height = 1) +
draw_plot(papers, x = .65, y = .5, width = .35, height = .5) +
draw_plot(cit, x = .65, y = 0, width = .35, height = 0.5)+
draw_plot_label(label = c("A", "B", "C"), size = 15,
x = c(0, 0.96, 0.96), y = c(1, 0.99, 0.49))
figure
save_plot(filename= "Figures/ThreePanel_Bar_Mean_Median_9.29.20.pdf", figure, base_width=10, base_height=8)
df_grantpubs<-subset(grants, grants$sdi_dis != "NA")
grantpubsDIS <- pubs %>%
group_by(Grant.Searched, Grant.Number, Interdis.Rubric.1) %>%
tally()
View(pubs)
pubs<- read.csv('PublicationTracker_0722.csv')
View(pubs)
pubs<- pubs %>% left_join(grants, by = c("Grant.Number"))
grantpubsDIS <- pubs %>%
group_by(Grant.Searched, Grant.Number, Interdis.Rubric.1) %>%
tally()
View(grantpubsDIS)
grantpubsDIS <- pubs %>%
group_by(Grant.Searched, Interdis.Rubric.1) %>%
tally()
View(grantpubsDIS)
journals <- read.csv('JournalDisciplines.csv')
pubs <- pubs %>%
mutate(Journal = tolower(Journal))
#pubs <- pubs[, -c(14:29)]
pubs <- rename(pubs, "journal" = "Journal")
journals <- rename(journals, "journal" = "Journal")
journals <- journals %>%
mutate(journal = tolower(journal))
pubs<- left_join(pubs, journals, by= "journal")
View(pubs)
pubs$Discipline
grantpubsDIS <- pubs %>%
group_by(Grant.Searched, Discipline) %>%
tally()
View(grantpubsDIS)
pubs$X
