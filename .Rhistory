axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "yellow3", fill = "yellow3", size = 1) +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "forestgreen", fill = "forestgreen", alpha = 0.3, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "navy", fill = "navy", alpha = 0.3, size = 1)
p
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
ggsave(filename= "Figures/Density_Shannon_CHN_grantprogram.pdf", t, width=10, height=8)
grants <- rename(grants, "GrantingProgram" = "Ã¯..Grant.Searched")
grants_subset <- subset(grants, grants$GrantingProgram == c("ES", "BE-CNH", "GEO-CHN"))
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_histogram(data=subset(grants, grants$GrantingProgram == "ES"), binwidth = 0.1, colour = "yellow3", fill = "yellow3", size = 1) +
geom_histogram(data=subset(grants, grants$GrantingProgram == "BE-CNH"),binwidth = 0.1, colour = "forestgreen", fill = "forestgreen", alpha = 0.3, size = 2)+
geom_histogram(data=subset(grants, grants$GrantingProgram == "GEO-CHN"),binwidth = 0.1, colour = "navy", fill = "navy", alpha = 0.3, size = 1)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Count of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_histogram(data=subset(grants, grants$GrantingProgram == "ES"), binwidth = 0.1, colour = "yellow3", fill = "yellow3", alpha = 0, size = 1) +
geom_histogram(data=subset(grants, grants$GrantingProgram == "BE-CNH"),binwidth = 0.1, colour = "forestgreen", fill = "forestgreen", alpha = 0, size = 2)+
geom_histogram(data=subset(grants, grants$GrantingProgram == "GEO-CHN"),binwidth = 0.1, colour = "navy", fill = "navy", alpha = 0, size = 1)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Count of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
library(dplyr)
library(tidyverse)
library(quanteda)
library(ggplot2)
#packages for word cloud
library(tm)
library(SnowballC)
library(wordcloud)
library(RColorBrewer)
library(RCurl)
library(XML)
library(vegan)
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_histogram(data=subset(grants, grants$GrantingProgram == "ES"), binwidth = 0.1, colour = "yellow3", fill = "yellow3", alpha = 0, size = 1) +
geom_histogram(data=subset(grants, grants$GrantingProgram == "BE-CNH"),binwidth = 0.1, colour = "forestgreen", fill = "forestgreen", alpha = 0, size = 2)+
geom_histogram(data=subset(grants, grants$GrantingProgram == "GEO-CHN"),binwidth = 0.1, colour = "navy", fill = "navy", alpha = 0, size = 1)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Count of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "yellow3", fill = "yellow3", size = 1, alpha = 0) +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "forestgreen", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "navy", fill = "navy", alpha = 0, size = 1)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
unique(grants$GrantingProgram)
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "yellow3", fill = "yellow3", size = 2, alpha = 0) +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2) +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "navy",  alpha = 0, size = 2)
p
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0) +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2) +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2)
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0) +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2) +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2) +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
p
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2) +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2) +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
p
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2)+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
p
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
p
p <- ggplot(grants_subset, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
ggsave(filename= "Figures/Density_Shannon_CHN_grantprogram_7.9.20.pdf", t, width=10, height=8)
View(grants_subset)
p <- ggplot(grants, aes(x=sdi_CNH))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
grants$Funding.Amount <- as.numeric(grants$Funding.Amount)
p <- ggplot(grants)+ geom_point(aes(x = grants$Funding.Amount, y=sdi_CNH), fill = "navy", alpha = 0.5, size =3)
t <- p + labs(x = "Funding Amount ", y ="Shannon Diversity Index - CNH" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18))
t
p <- ggplot(grants, aes(x=sdi_interdisc))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for CNH ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
p <- ggplot(grants, aes(x=sdi_interdisc))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")+
geom_density(data=subset(grants, grants$GrantingProgram == "GEO-CHN"), colour = "#b2df8a",  alpha = 0, size = 2, linetype = "dotted") +
geom_density(data=subset(grants, grants$GrantingProgram == "Hydrology"), colour = "#1f78b4",  alpha = 0, size = 2, linetype = "longdash") +
geom_density(data=grants_subset, colour = "black",  alpha = 0, size = 2)
t <- p + labs(x = "Shannon Diversity for Interdisciplinary ", y ="Density of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30"),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18),
legend.position = c(.95, .95),)
t
ggsave(filename= "Figures/Density_Shannon_Interdis_grantprogram_7.9.20.pdf", t, width=10, height=8)
p <- ggplot(grants, aes(x=sdi_interdisc))+
geom_density(data=subset(grants, grants$GrantingProgram == "ES"), colour = "#a6cee3", fill = "yellow3", size = 2, alpha = 0, linetype = "longdash") +
geom_density(data=subset(grants, grants$GrantingProgram == "BE-CNH"), colour = "#33a02c", fill = "forestgreen", alpha = 0, size = 2, linetype = "dotted")
p
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
library(dplyr)
library(tidyverse)
library(quanteda)
library(ggplot2)
#packages for word cloud
library(tm)
library(SnowballC)
library(wordcloud)
library(RColorBrewer)
library(RCurl)
library(XML)
library(vegan)
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
grants<- read.csv('Grants_toTrack_0702.csv')
pubs<- read.csv('PublicationTracker_0702.csv')
journals <- read.csv('SubsetJournals_11Jun20.csv')
grant_sum<-grants %>% group_by(Grant.Searched) %>% summarize(count=n())
View(grants)
View(grants)
View(grants)
names(grants)[1] <- "Grant.Searched"
View(grants)
names(grants)[1] <- "Grant.Searched"
grant_sum <- grants %>% group_by(Grant.Searched) %>% summarize(count=n())
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
View(grants)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
View(grants)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
grants$Funding.Amount <- as.numeric(grants$Funding.Amount)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
View(df)
setwd("~/Documents/GitRepos/CNH-perspectives")
# setwd("C:/Users/Megan/Google Drive/CNH_perspectives")
library(dplyr)
library(tidyverse)
library(quanteda)
library(ggplot2)
#packages for word cloud
library(tm)
library(SnowballC)
library(wordcloud)
library(RColorBrewer)
library(RCurl)
library(XML)
library(vegan)
grants<- read.csv('Grants_toTrack_0702.csv')
pubs<- read.csv('PublicationTracker_0702.csv')
journals <- read.csv('SubsetJournals_11Jun20.csv')
names(grants)[1] <- "Grant.Searched"
grant_sum <- grants %>% group_by(Grant.Searched) %>% summarize(count=n())
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
grants$Funding.Amount <- as.numeric(grants$Funding.Amount)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
View(df)
View(grants)
View(grant_deets)
View(grant_deets)
df_grantpubs <- left_join(grants, grant_deets, by= "Grant.Number")
View(df_grantpubs)
View(grant_deets)
df_grantpubs$SDICNH_cat<-cut(df_grantpubs$sdi_CNH c(0, 1, 2, 3))
df_grantpubs$SDICNH_cat<-cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
grant_deets$Grant.Number
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
View(df_grantpubs)
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 1, 2, 3))
grantpubs <- df_grantpubs %>%
group_by(Grant.Searched, SDICNH_cat) %>%
tally()
View(df_grantpubs)
View(df_grantpubs)
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 0, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 0, 1, 2, 3))
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 0.01, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 0.01, 1, 2, 3))
df_grantpubs[is.na(df_grantpubs)] = 0
grantpubs <- df_grantpubs %>%
group_by(Grant.Searched, SDICNH_cat) %>%
tally()
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 1, 2, 3))
df_grantpubs <- na.omit(df_grantpubs)
grantpubs <- df_grantpubs %>%
group_by(Grant.Searched, SDICNH_cat) %>%
tally()
View(grantpubs)
grantpubsIN <- df_grantpubs %>%
group_by(Grant.Searched, SDIInt_cat) %>%
tally()
grantpubsCH <- df_grantpubs %>%
group_by(Grant.Searched, SDICNH_cat) %>%
tally()
View(grantpubsCH)
View(grantpubsIN)
p <- ggplot(data = grants) +
geom_col(aes(x = Funding.Amount, y= Number.of.Papers, fill = Grant.Searched))
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
t <- p + labs(x = "Grant Program", y ="Number of Grants" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =10),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18))
t
p <- ggplot(data = grants) +
geom_point(aes(x = Funding.Amount, y= Number.of.Papers, fill = Grant.Searched))
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
t <- p + labs(x = "Funding Amount", y ="Number of Papers" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =10),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18))+
scale_fill_gradientn(colours=c("green3", "grey50", "dodgerblue", "navy", "darkcyan", "yellow4", "black")) #"green4","olivedrab3", "darkorange1",))   #"cyan3", "yellow4")"green3", "grey50"  #"dodgerblue", "navy" #"darkcyan", "yellow4", "black" #"green4","olivedrab3", "darkorange1", # "red","navy", "dodgerblue" #"darkorchid4","lightskyblue4", "black"
t
p
p <- ggplot(data = grants) +
geom_point(aes(x = Funding.Amount, y= log10(Number.of.Papers), colour = Grant.Searched, fill = Grant.Searched), size = 2)
p <- p + theme(panel.background = element_rect(fill = 'white', colour = 'black'))
t <- p + labs(x = "Funding Amount", y ="Number of Papers" ) +
theme(
panel.background = element_rect(fill = 'white', colour = 'black'),
axis.text = element_text(size = 18),
axis.text.x = element_text(colour = "gray30", size =10),
axis.text.y = element_text(colour = "gray30"),
panel.grid.major = element_blank(),
panel.grid.minor = element_blank(),
axis.title.x = element_text(size =20),
axis.title.y = element_text(size =18))+
scale_fill_gradientn(colours=c("green3", "grey50", "dodgerblue", "navy", "darkcyan", "yellow4", "black")) #"green4","olivedrab3", "darkorange1",))   #"cyan3", "yellow4")"green3", "grey50"  #"dodgerblue", "navy" #"darkcyan", "yellow4", "black" #"green4","olivedrab3", "darkorange1", # "red","navy", "dodgerblue" #"darkorchid4","lightskyblue4", "black"
t
p
ggsave(filename= "Figures/FundingAmount_vs_Papers.pdf", p, width=10, height=8)
View(grant_deets)
View(grantpubs)
View(df_grantpubs)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
df_grantpubs <- left_join(grants, grant_deets, by= "Grant.Number")
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 1, 2, 3))
#df_grantpubs[is.na(df_grantpubs)] = 0
library(dplyr)
library(tidyverse)
library(quanteda)
library(ggplot2)
#packages for word cloud
library(tm)
library(SnowballC)
library(wordcloud)
library(RColorBrewer)
library(RCurl)
library(XML)
library(vegan)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
df_grantpubs <- left_join(grants, grant_deets, by= "Grant.Number")
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 1, 2, 3))
#df_grantpubs[is.na(df_grantpubs)] = 0
View(df_grantpubs)
grant_ids <- unique(pubs$Grant.Number)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi'=-1)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi_CNH'=-1, 'sdi_interdisc'=-1)
for (i in 1:length(grant_ids)) {
if (length(pubs$Publication.Year[pubs$Grant.Number == grant_ids[i]]) > 2){
grant_deets$sdi_CNH[i] <- diversity(pubs$CNH.Rubric.2[pubs$Grant.Number == grant_ids[i]], index="shannon")
grant_deets$sdi_interdisc[i] <- diversity(pubs$Interdis.Rubric.1[pubs$Grant.Number == grant_ids[i]], index="shannon")
} else {grant_deets$sdi_CNH[i] <-NA
grant_deets$sdi_interdisc[i] <-NA
}
}
View(grant_deets)
View(pubs)
View(pubs)
pubs$X <- NULL
pubs <- na.omit(pubs)
grant_ids <- unique(pubs$Grant.Number)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi'=-1)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi_CNH'=-1, 'sdi_interdisc'=-1)
for (i in 1:length(grant_ids)) {
if (length(pubs$Publication.Year[pubs$Grant.Number == grant_ids[i]]) > 2){
grant_deets$sdi_CNH[i] <- diversity(pubs$CNH.Rubric.2[pubs$Grant.Number == grant_ids[i]], index="shannon")
grant_deets$sdi_interdisc[i] <- diversity(pubs$Interdis.Rubric.1[pubs$Grant.Number == grant_ids[i]], index="shannon")
} else {grant_deets$sdi_CNH[i] <-NA
grant_deets$sdi_interdisc[i] <-NA
}
}
#QUITE A FE
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
grants$Funding.Amount <- as.numeric(grants$Funding.Amount)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
df_grantpubs <- left_join(grants, grant_deets, by= "Grant.Number")
View(df_grantpubs)
View(df_grantpubs)
View(df_grantpubs)
View(df_grantpubs)
library(tm)
library(SnowballC)
library(wordcloud)
library(RColorBrewer)
library(RCurl)
library(XML)
library(vegan)
grants<- read.csv('Grants_toTrack_0702.csv')
pubs<- read.csv('PublicationTracker_0702.csv')
journals <- read.csv('SubsetJournals_11Jun20.csv')
names(grants)[1] <- "Grant.Searched"
grant_sum <- grants %>% group_by(Grant.Searched) %>% summarize(count=n())
library(dplyr)
library(tidyverse)
library(quanteda)
library(ggplot2)
grants<- read.csv('Grants_toTrack_0702.csv')
pubs<- read.csv('PublicationTracker_0702.csv')
journals <- read.csv('SubsetJournals_11Jun20.csv')
names(grants)[1] <- "Grant.Searched"
grant_sum <- grants %>% group_by(Grant.Searched) %>% summarize(count=n())
pubs$Journal<-as.character(pubs$Journal)
pubs$Journal<-char_tolower(pubs$Journal)
pub_sum<- pubs %>% group_by(Journal) %>% summarize(count=n())
rub_sum<- pubs %>% group_by(CNH.Rubric.2) %>% summarize(count=n())
rub_sum_v2<- pubs %>% group_by(Interdis.Rubric.1) %>% summarize(count=n())
pubs$X <- NULL
pubs <- na.omit(pubs)
grant_ids <- unique(pubs$Grant.Number)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi'=-1)
grant_deets <- data.frame('Grant.Number'=grant_ids, 'sdi_CNH'=-1, 'sdi_interdisc'=-1)
for (i in 1:length(grant_ids)) {
if (length(pubs$Publication.Year[pubs$Grant.Number == grant_ids[i]]) > 2){
grant_deets$sdi_CNH[i] <- diversity(pubs$CNH.Rubric.2[pubs$Grant.Number == grant_ids[i]], index="shannon")
grant_deets$sdi_interdisc[i] <- diversity(pubs$Interdis.Rubric.1[pubs$Grant.Number == grant_ids[i]], index="shannon")
} else {grant_deets$sdi_CNH[i] <-NA
grant_deets$sdi_interdisc[i] <-NA
}
}
#QUITE A FEW NAs for the diversity that we need to figure out (not all 0 papers)
grants$Number.of.Papers <- as.numeric(grants$Number.of.Papers)
grants$Funding.Amount <- as.numeric(grants$Funding.Amount)
df <- grants %>%
group_by(Grant.Searched) %>%
summarise(count = n(), numberpaper = sum(Number.of.Papers), FundingAmount = sum(Funding.Amount))
df_grantpubs <- left_join(grants, grant_deets, by= "Grant.Number")
df_grantpubs$SDICNH_cat <- cut(df_grantpubs$sdi_CNH, c(0, 1, 2, 3))
df_grantpubs$SDIInt_cat <- cut(df_grantpubs$sdi_interdisc, c(0, 1, 2, 3))
#df_grantpubs[is.na(df_grantpubs)] = 0
df_grantpubs <- na.omit(df_grantpubs)
View(df_grantpubs)
